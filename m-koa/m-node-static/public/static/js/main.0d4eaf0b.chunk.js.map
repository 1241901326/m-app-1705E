{"version":3,"sources":["api/url.js","api/index.js","views/Login.js","components/Nav.js","components/List.js","views/Home.js","views/Detail.js","views/Index.js","Router.js","store.js","index.js"],"names":["common","config","a","axios","response","login","data","url","urls","method","getNav","getList","id","add","getDetail","getBookList","bookDelete","bookUpdate","Login","props","state","username","password","usernameRef","React","createRef","field","e","this","setState","target","value","console","log","trim","alert","Api","then","res","code","localStorage","setItem","history","push","message","keyCode","handleLogin","current","focus","ref","onChange","handleInput","bind","placeholder","onKeyUp","handleEnter","type","onClick","Component","Nav","index","navList","currentIndex","navListDom","map","item","key","className","handleNav","title","connect","dispatch","List","getItem","bookList","checked","count","currentList","currentListDom","src","avatar","alt","price","handleDetail","find","book","handleAdd","withRouter","Home","useState","detail","setDetail","useEffect","match","params","bookListClone","JSON","parse","stringify","author","score","summary","MyBook","lazy","Index","to","fallback","exact","path","component","render","Detail","Router","from","defaultState","currentId","store","createStore","action","newState","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.0d4eaf0b.chunk.js","sourcesContent":["export default {\r\n  login: '/api/login', //登录\r\n  getNav: '/api/nav',  //导航\r\n  getList: '/api/list',  //列表\r\n  add: '/api/add',  //添加\r\n  getDetail: '/api/detail',  //详情\r\n  getBookList: '/api/get_book_list', //书包\r\n  bookDelete: '/api/delete', //删除书包里的书本\r\n  bookUpdate: '/api/update', //更新书包\r\n}","import axios from 'axios'\r\nimport urls from './url'\r\n\r\nconst isDev = process.env.NODE_ENV === 'development';\r\nif (isDev) {\r\n  //axios.defaults.baseURL = \"http://localhost:8888\"   //可以调用koa的接口\r\n  axios.defaults.baseURL = \"http://localhost\"   //可以调用使用node的http原生模块编写的接口\r\n}\r\n\r\nconst common = async (config) => {\r\n  const response = await axios(config)\r\n  return response\r\n}\r\n\r\nexport default {\r\n  login: (data) => common({ url: urls.login, data, method: 'post' }),\r\n  getNav: () => common({ url: urls.getNav }),\r\n  getList: (id) => common({ url: urls.getList + id } ),\r\n  add:(data) => common({ url: urls.add, data, method: 'post' }),\r\n  getDetail: (url) => common({ url: urls.getDetail + url }),\r\n  getBookList: () => common({url: urls.getBookList}),\r\n  bookDelete: (data) => common({url: urls.bookDelete, data, method: 'post'}),\r\n  bookUpdate: (data) => common({ url: urls.bookUpdate, data, method: 'post'})\r\n}","import React, { Component } from 'react'\r\nimport Api from '../api'\r\n\r\nexport default class Login extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      username: 'admin',\r\n      password: '123456'\r\n    }\r\n\r\n    this.usernameRef = React.createRef()\r\n  }\r\n\r\n  handleInput(field, e) {\r\n    this.setState({\r\n      [field]: e.target.value\r\n    })\r\n  }\r\n\r\n  handleLogin() {\r\n    let { username, password } = this.state\r\n    console.log(username, password)\r\n    if (username.trim() === '') {\r\n      alert('用户名不能为空')\r\n    } else {\r\n      Api.login({ username, password}).then(res => {\r\n        if (res.data.code === 200) {\r\n          localStorage.setItem('username', res.data.data.username)\r\n          this.props.history.push('/index/home')\r\n        } else {\r\n          alert(res.data.message)\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  handleEnter(e) {\r\n    if (e.keyCode === 13) {\r\n      this.handleLogin()\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    //document.getElementById('m-username').focus()\r\n    this.usernameRef.current.focus()\r\n  }\r\n\r\n  render() {\r\n    let { username, password } = this.state\r\n    return (\r\n      <div>\r\n        <div>\r\n          <input value={username} ref={this.usernameRef} onChange={this.handleInput.bind(this, 'username')} placeholder=\"请输入用户名\"></input>\r\n        </div>\r\n        <div>\r\n          <input value={password} onKeyUp={this.handleEnter.bind(this)} onChange={this.handleInput.bind(this, 'password')} type=\"password\" placeholder=\"请输入密码\"></input>\r\n        </div>\r\n        <button onClick={this.handleLogin.bind(this)}>登录</button>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Api from '../api'\r\n\r\nclass Nav extends Component {\r\n  handleNav(index, id) {\r\n    this.props.setState('currentIndex', index)\r\n    this.props.setState('currentId', id)\r\n\r\n    Api.getList(`?id=${id}`).then(res => {\r\n      if (res.data.code === 200) {\r\n        this.props.setState('currentList', res.data.data)\r\n      }\r\n    })\r\n  }\r\n\r\n  componentDidMount() {\r\n    Api.getNav().then(res => {\r\n      if (res.data.code === 200) {\r\n        this.props.setState('navList', res.data.data)\r\n      }\r\n    })\r\n  }\r\n  render() {\r\n    let { navList, currentIndex } = this.props\r\n\r\n    let navListDom = navList.map((item, index) => (\r\n      <span key={item.id} className={\"m-nav-item \" + (currentIndex === index ? 'active' : '')} \r\n        onClick={this.handleNav.bind(this, index, item.id)}>\r\n        {item.title}\r\n      </span>))\r\n\r\n    return (\r\n      <div>\r\n        {navListDom}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    navList: state.navList,\r\n    currentIndex: state.currentIndex\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    setState(key, value) {\r\n      dispatch({ type: 'SET_STATE', key, value })\r\n    }\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Nav)","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport LazyLoad from 'react-lazy-load'\r\nimport Api from '../api'\r\n\r\nclass List extends Component {\r\n\r\n  handleDetail(id) {\r\n    this.props.history.push('/index/home/detail/' + id)\r\n  }\r\n\r\n  handleAdd(item) {\r\n    if (!localStorage.getItem('username')) {\r\n      this.props.history.push('/login')\r\n      return;\r\n    }\r\n    let { bookList } = this.props\r\n    item.checked = true\r\n    item.count = 1\r\n    bookList.push(item)\r\n    this.props.setState('bookList', bookList)\r\n    Api.add({ item }).then(res => {\r\n      if (res.data.code === 200) {\r\n\r\n      }\r\n    })\r\n  }\r\n\r\n  //挂载，刷新的时候会走这里\r\n  componentDidMount() {\r\n    //列表\r\n    Api.getList(`?id=0`).then(res => {\r\n      if (res.data.code === 200) {\r\n        this.props.setState('currentList', res.data.data)\r\n      }\r\n    })\r\n\r\n    //请求书包里的数据\r\n    Api.getBookList().then(res => {\r\n      if (res.data.code === 200) {\r\n        this.props.setState('bookList', res.data.data)\r\n      }\r\n    })\r\n    this.props.setState('currentIndex', 0)\r\n  }\r\n  render() {\r\n    let { currentList, bookList } = this.props\r\n\r\n    let currentListDom = currentList.map(item => (\r\n      <div key={item.id} className=\"m-list-item\">\r\n        <LazyLoad className=\"m-loading-img\">\r\n          <img src={item.avatar} className=\"m-list-img\" alt={item.title}></img>\r\n        </LazyLoad>\r\n        <div className=\"m-list-info\">\r\n          <div className=\"m-list-title\">{item.title}</div>\r\n          <div className=\"m-list-price\">¥ {item.price}</div>\r\n          <div className=\"m-list-btn-wrap\">\r\n            <span className=\"m-book-detail-btn\" onClick={this.handleDetail.bind(this, item.id)}>书籍详情</span>\r\n            {\r\n              bookList.find(book => book.id === item.id)\r\n                ? <span className=\"m-book-disable-btn\">已收藏</span>\r\n                : <span className=\"m-book-detail-btn\" onClick={this.handleAdd.bind(this, item)}>收藏</span>\r\n            }\r\n          </div>\r\n        </div>\r\n      </div>\r\n    ))\r\n\r\n    // let currentListDom = []\r\n    // for (let i = 0; i < currentList.length; i++) {\r\n    //   currentListDom.push(<div key={currentList[i].id}>\r\n    //     <img src={currentList[i].avatar} alt={currentList[i].title}></img>\r\n    //     {currentList[i].title}</div>)\r\n    // }\r\n\r\n    return (\r\n      <div>\r\n        {currentListDom}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currentList: state.currentList,\r\n    bookList: state.bookList\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    setState(key, value) {\r\n      dispatch({ type: 'SET_STATE', key, value })\r\n    }\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(List))","import React, { Component } from 'react'\r\nimport Nav from '../components/Nav'\r\nimport List from '../components/List'\r\n\r\nclass Home extends Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Nav></Nav>\r\n        <List></List>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Home\r\n","import React, { useState, useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Api from '../api'\r\n\r\nconst Detail = (props) => {\r\n  const [detail, setDetail] = useState({})\r\n\r\n  const handleAdd = (item) => {\r\n    let { bookList } = props\r\n    let bookListClone = JSON.parse(JSON.stringify(bookList))\r\n    item.checked = true\r\n    item.count = 1\r\n    bookListClone.push(item)\r\n    props.setState('bookList', bookListClone)\r\n    Api.add({ item }).then(res => {\r\n      if (res.data.code === 200) {\r\n\r\n      }\r\n    })\r\n  }\r\n\r\n  useEffect(() => {\r\n    let { id } = props.match.params\r\n    Api.getDetail(`?id=${id}`).then(res => {\r\n      if (res.data.code === 200) {\r\n        setDetail(res.data.data)\r\n      }\r\n    })\r\n\r\n    Api.getBookList().then(res => {\r\n      if (res.data.code === 200) {\r\n        //props.setState('bookList', res.data.data)\r\n      }\r\n    })\r\n  }, [])\r\n\r\n  let { bookList } = props\r\n\r\n  return (\r\n    <div>\r\n      <img src={detail.avatar} alt={detail.title}></img>\r\n      \r\n      <div>价格：{detail.price}元\r\n        {\r\n          bookList.find(book => book.id === detail.id)\r\n            ? <button>已收藏</button>\r\n            : <button onClick={handleAdd.bind(this, detail)}>收藏</button>\r\n        }\r\n      </div>\r\n      <div>作者：{detail.author}</div>\r\n      <div>分数：{detail.score}</div>\r\n      <div>简介：{detail.summary}</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    bookList: state.bookList\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    setState(key, value) {\r\n      dispatch({ type: 'SET_STATE', key, value })\r\n    }\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Detail)","import React, { Component, Suspense, lazy } from 'react'\r\nimport { Route, Switch, NavLink, Redirect } from 'react-router-dom'\r\nimport Home from './Home'\r\n//import MyBook from './MyBook'\r\nimport Detail from './Detail'\r\nconst MyBook = lazy(() => import('./MyBook'))\r\n\r\nexport default class Index extends Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div>\r\n          <NavLink to=\"/index/home\" className=\"m-nav-item\">首页</NavLink>\r\n          <NavLink to=\"/index/book\" className=\"m-nav-item\">书包</NavLink>\r\n        </div>\r\n        <Suspense fallback={<div>loading...</div>}>\r\n          <Switch>\r\n            <Route exact path=\"/index/home\" component={Home}></Route>\r\n            <Route path=\"/index/book\" render={() => {\r\n              if (localStorage.getItem('username')) {\r\n                return <MyBook></MyBook>\r\n              } else {\r\n                return <Redirect to=\"/login\"></Redirect>\r\n              }\r\n            }}></Route>\r\n            <Route path=\"/index/home/detail/:id\" component={Detail}></Route>\r\n          </Switch>\r\n        </Suspense>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { Switch, Route, Redirect } from 'react-router-dom'\r\nimport Login from './views/Login'\r\nimport Index from './views/Index'\r\n\r\nexport default class Router extends Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Switch>\r\n          <Redirect from=\"/\" to=\"/login\" exact></Redirect>\r\n          <Redirect from=\"/index\" to=\"/index/home\" exact></Redirect>\r\n          <Route path=\"/login\" component={Login}></Route>\r\n          <Route path=\"/index\" component={Index}></Route>\r\n        </Switch>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import { createStore } from 'redux'\r\n\r\nconst defaultState = {\r\n  navList: [],\r\n  currentIndex: 0,\r\n  currentId: 0,\r\n  currentList: [],\r\n  bookList: []\r\n}\r\n\r\nconst reducer = (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    //这个case功能比较强大，可以改state里的所有字段，动态的key，动态value\r\n    case 'SET_STATE':\r\n      let newState = JSON.parse(JSON.stringify(state))\r\n      newState[action.key] = action.value\r\n      return newState\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst store = createStore(reducer)\r\n\r\nexport default store","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom'\nimport { Provider } from 'react-redux'\nimport Router from './Router'\nimport store from './store'\nimport './index.css';\n\nReactDOM.render(\n  <Provider store={store}>\n    <BrowserRouter>\n      <Router></Router>\n    </BrowserRouter>\n  </Provider>,\n  document.getElementById('root'));\n"],"sourceRoot":""}